<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>
        Room to full or six or one by one
    </h1>
    <div id="usernames"></div>

    <div id="roomcode"></div>

    <div id="viewlist"></div>

    <a href="./full"><span>創造房間(全班)</span></a>
    <a href="./six"><span>創造房間(小組)</span></a>
    <a href="./onebyone"><span>創造房間(個人)</span></a>
    <a href="/logout"><span>登出</span></a>
    <form action="./game.html" method="" class="theForm">
        <button type="submit" style="margin-top: 20px;border-radius: 10px;padding: 5px;width: 70px;">送出</button>
    </form>
</body>


<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io();
    const connect = 'connect';
    const usernameElement = document.getElementById('usernames');
    const RoomCodeElement = document.getElementById('roomcode');
    const studentContainer = document.getElementById('viewlist');

    socket.on('connect', function () {
        console.log(connect);
        studentContainer.textContent = '尚未有學生加入';
    })

    socket.on('username', (name) => {
        if (name) {
            usernameElement.textContent = "使用者 :" + name;
        } else {
            usernameElement.textContent = ' 未登入 ';
        }
    });
    socket.on('RoomCode', (code) => {
        if (code) {
            RoomCodeElement.textContent = "房間代碼 :" + code;
        } else {
            RoomCodeElement.textContent = ' 未傭有 ';
        }
    });

    socket.on('list', (studentList) => {
        const studentElement = document.createElement('div');

        // 清空之前的內容，以免重複顯示
        studentElement.textContent = '';

        studentList.forEach(studentName => {
            const studentNameElement = document.createElement('p');
            studentNameElement.textContent = studentName;
            studentElement.appendChild(studentNameElement);
        });

        // 將學生名單添加到 studentElement 中
        studentContainer.innerHTML = '';
        studentContainer.appendChild(studentElement);
    });

</script>

</html>